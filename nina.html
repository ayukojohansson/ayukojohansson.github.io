<html>
  <head>
    <style>
      body {
        text-align : center;
      }
      canvas {
        display : block;
        width : 1100px;
        height : 800px;
        margin : auto;
        padding : 0;
        border : none;
        background-color : black;
      }
      button {
        display : inline-block;
        font-size : inherit;
        margin : auto;
        padding : 0.6em;
      }
    </style>
    <script>
const data = `2236,287
1031,109
1721,275
1211,61
1541,323
1197,227
352,229
1024,325
2228,253
1556,61
1884,253
500,241
155,251
2597,133
1565,155
2253,229
877,83
1394,1
1394,383
2734,287
1050,193
1738,73
1738,311
2390,313
2733,181
2733,277
1185,253
1873,157
1568,83
1741,121
712,133
1401,311
1007,23
1062,13
2438,301
1862,251
1579,83
655,215
2097,169
2097,215
999,263
33,299
482,73
482,311
894,73
1858,73
1858,311
1857,229
1240,25
1168,167
1511,121
1854,287
899,59
1853,133
2535,13
217,205
1593,301
46,205
2706,205
2706,301
2190,131
2190,253
2534,275
1846,179
1329,337
1329,239
2705,49
1157,119
469,215
1251,59
1672,361
467,263
1843,313
810,59
1942,59
1942,325
2286,205
914,325
2182,301
1150,275
1775,23
1775,361
288,215
1664,215
2351,181
2351,203
975,11
1777,59
1491,229
2637,133
2006,229
1781,61
1781,323
2174,253
798,131
2345,95
969,239
1141,251
453,155
408,263
968,313
925,1
926,203
1961,335
241,95
446,157
2306,227
445,371
2307,109
1821,275
1964,299
1793,229
271,131
271,253
2138,25
1990,313
2675,25
77,167
1970,119
2497,311
2492,253
1548,122
1547,130
1547,254
859,62
1893,62
1893,322
1383,202
2243,206
509,110
1885,302
2244,254
1533,266
1907,358
672,58
2080,250
881,14
2257,302
1871,302
1054,206
2556,254
1572,130
2260,254
147,338
1057,274
658,134
658,250
718,250
2034,134
2033,286
2095,334
2377,346
2377,230
2375,374
1514,118
2546,170
1582,134
1582,250
2019,358
1938,22
1158,118
1846,26
1846,358
1846,166
1846,122
1846,262
2630,74
122,166
2630,218
1498,358
2013,170
1667,254
1773,226
225,350
1151,130
2289,34
1666,46
1666,338
1086,238
1774,50
1774,334
2638,334
1950,242
1317,14
2693,254
1317,62
2297,106
2297,206
2642,86
2642,298
234,134
1826,370
1826,206
2302,110
2341,230
965,154
965,322
413,58
413,326
791,134
2478,206
1130,254
1622,130
2310,34
2310,226
1279,314
247,170
2505,214
1623,362
1129,170
1129,214
1817,310
954,62
2487,290
1111,290
2487,242
1638,86
1638,298
2325,158
344,75
2408,75
2407,99
2407,285
1721,285
1899,267
2416,147
164,195
1040,303
1712,81
1712,273
1040,33
1735,39
1735,153
1392,201
2736,105
360,129
1699,363
2602,9
838,297
1914,297
1868,213
2604,207
1228,369
1524,207
2383,123
2266,375
2377,183
2377,201
2269,69
893,315
1238,135
1170,231
1582,231
1755,333
1411,309
895,249
2200,129
2200,255
1928,255
823,303
561,363
1937,21
815,219
2190,363
814,21
562,267
2190,117
738,123
2358,27
982,165
2185,303
2185,273
2461,213
2461,309
634,381
399,333
1088,87
1088,279
2293,297
2523,327
1147,249
1262,357
1490,357
2638,261
403,327
1315,279
749,297
2641,153
2641,231
1265,345
799,345
234,255
2518,129
926,285
2685,279
2133,297
2166,159
1966,213
247,201
97,255
2655,129
2157,315
2157,123
2157,261
781,261
437,21
2315,363
608,75
951,33
951,351
1467,33
779,321
778,315
2154,327
2064,356
1720,28
1720,164
1203,272
2415,32
2416,4
336,188
2416,188
2400,44
2056,356
2588,356
164,220
1735,304
1735,320
532,80
532,304
537,232
1913,56
1569,40
2559,248
1570,244
2727,352
542,52
542,332
834,140
2090,184
2090,200
714,200
662,280
1746,232
1402,304
1350,112
1918,64
545,124
1002,212
1002,76
2378,316
2547,140
1066,220
1937,364
1330,340
1078,52
1674,140
1674,244
294,92
294,292
2458,100
122,4
2630,188
466,4
466,380
466,196
1154,332
739,76
2527,164
2634,368
1494,176
2634,32
1258,160
1946,160
1318,76
1318,308
1779,236
2297,20
1143,164
233,260
1143,124
1143,260
2641,56
1142,112
1442,260
105,4
1959,340
793,332
1959,332
793,244
1307,296
1445,88
1445,104
1651,296
1101,104
1651,280
2339,40
1961,104
1823,56
1823,328
2511,304
962,28
1822,308
442,256
2310,128
1107,4
1107,196
1795,116
1795,268
957,124
1795,260
1812,172
1629,320
1032,89
1032,103
171,271
2581,113
2235,271
1893,113
523,283
2416,319
1728,65
2588,223
2399,67
1729,125
1729,259
1386,151
2741,379
2741,197
2053,379
1536,259
528,65
848,127
357,305
2048,115
877,365
2390,67
1738,317
2561,17
1528,41
1011,379
2210,89
543,317
1865,77
2092,127
2036,257
143,53
2203,341
1171,365
1859,307
2546,233
1857,53
895,139
1856,331
2616,199
135,259
2617,125
1241,67
823,163
1585,199
897,199
1758,149
1758,235
1758,77
1758,307
1587,355
1587,221
1165,67
39,247
2713,247
1759,161
905,187
1847,187
905,283
1847,329
905,247
471,271
1330,331
1422,53
1422,331
642,331
2110,245
985,173
468,127
1253,319
1598,79
1601,89
1601,281
806,317
1150,115
570,31
1834,163
1834,259
457,329
919,55
919,247
1093,307
1659,269
2641,115
2175,77
2126,5
1094,163
282,317
1658,259
970,67
970,125
1141,341
1611,235
923,43
1829,341
796,379
796,187
2172,235
2172,331
925,163
2302,187
2302,245
2649,137
1823,41
2305,55
1134,365
1275,247
587,151
1620,305
443,365
2309,19
2654,187
2654,197
1278,91
1474,101
590,293
2162,293
1130,283
442,91
2506,331
246,245
940,89
940,295
1629,139
779,29
1467,151
253,103
435,89
2317,89

y,192
x,1376
y,96
x,688
y,48
x,344
y,24
x,172
y,12
x,86
y,6`;

const [lines, folds] = data.split('\n\n');
const instructions = folds.split('\n').map(line => {
  const [dir, value] = line.split(',');
  return [dir=='x' ? +value : 0, dir=='y' ? +value : 0];
});

      (function(){
        "use strict"

        const { dots } = lines.split('\n').reduce((acc, line) => {
          const [x,y] = line.split(',').map(d => +d);
          acc.dots.push(new Rectangle(x,y));
          if (!acc.maxX || acc.maxX < x) acc.maxX = x;
          if (!acc.maxY || acc.maxY < y) acc.maxY = y;
          return acc;
        }, { dots: [] });

        window.addEventListener("load", setupAnimation, false);
        let canvas, ctx, 
          timer,
          display;

        function setupAnimation (evt) {
          canvas = document.querySelector("canvas");
          ctx = canvas.getContext('2d');
          ctx.fillStyle = 'fuchsia';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          console.log(canvas.width, canvas.height)
          display = document.querySelector("strong");
          window.removeEventListener(evt.type, setupAnimation, false);

          drawAnimation();
        }

        function scissor (x, y, f) {
          ctx.fillStyle = 'fuchsia';
          ctx.fillRect(x*f + 20, y*f + 20, 10 , 10);
        }
        function clear () {
          ctx.fillStyle = 'black';
          ctx.fillRect(0,0,1100,800);
        }

        let step = 0;
        let maxX = 0, maxY = 0;
        let factor;
        function updateNextPosition () {
          const instruction = instructions[step];
          if (!instruction) {
            console.log('done!');
            return;
          }

          maxX = 0;
          maxY = 0;
          dots.forEach(rect => {
            if (maxX < rect.position[0]) maxX = rect.position[0];
            if (maxY < rect.position[1]) maxY = rect.position[1];
            rect.next = [
              (instruction[0] && rect.position[0] > instruction[0]) ? instruction[0] * 2 - rect.position[0] : rect.position[0],
              (instruction[1] && rect.position[1] > instruction[1]) ? instruction[1] * 2 - rect.position[1] : rect.position[1]
            ];
            rect.move = [rect.position[0] - rect.next[0], rect.position[1] - rect.next[1]];
          })

          const nextFactor = Math.min(750 / maxY, 1000 / maxX);
          if (!factor) factor = nextFactor;
          scaleAnimation(factor, nextFactor, (nextFactor-factor) / 10);

          display.innerHTML = `${step + 1}`;
        }

        function scaleAnimation (current, nextFactor, increase) {
          if (!factor) return;

          if (current >= nextFactor) {
            factor = nextFactor;
            timer = setTimeout(drawAnimation, 300);
          } else {
            clear();
            dots.forEach(rect => {
              scissor(rect.position[0], rect.position[1], current);
            });
            timer = setTimeout(() => scaleAnimation(current + increase, nextFactor, increase), 30);
          }
        }

        function drawAnimation () {
          const size = 10;
          const speed = 20/factor;
          let moved = false;
          clear();
          dots.forEach(rect => {
            if (rect.move[0] > 0) {
              scissor(rect.next[0] + rect.move[0], rect.position[1], factor);
              rect.move[0] -= speed;
              moved = true;
            } else if (rect.move[1] > 0) {
              scissor(rect.position[0], rect.next[1] + rect.move[1], factor);
              rect.move[1] -= speed;
              moved = true;
            } else if (rect.next) {
              rect.position = rect.next;
              scissor(rect.position[0], rect.position[1], factor);
            }
          });

          if (moved) {
            timer = setTimeout(drawAnimation, 30);
          } else {
            updateNextPosition();
            step++;
          }
        }

        function Rectangle (x, y) {
          var rect = this;
          rect.position = [x, y];  
          rect.move = [0, 0];  
        }
      })();
    </script>
  </head>
  <body>
    <p>Folding <strong>0</strong> times</p>
    <canvas width="1100" height="800">Your browser does not seem to support 
      HTML5 canvas.</canvas>
  </body>
</html>